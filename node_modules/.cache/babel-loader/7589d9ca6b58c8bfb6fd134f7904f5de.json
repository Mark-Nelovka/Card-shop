{"ast":null,"code":"import _regeneratorRuntime from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";// import { v4 } from \"uuid\";\nimport{PRODUCT}from\"./Api\";import Basket from\"../images/Basket_card.svg\";import{client}from\"../index\";import Notiflix from\"notiflix\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=/*#__PURE__*/function(_Component){_inherits(HomePage,_Component);var _super=_createSuper(HomePage);function HomePage(){var _this;_classCallCheck(this,HomePage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={showBasker:false,productAll:[],id:\"\",priceHomePage:[],activeS:\"\"};_this.id=function(e){var id=e.currentTarget.id;switch(e._reactName){case\"onMouseOver\":_this.setState({id:id});break;case\"onMouseLeave\":_this.setState({id:\"\"});break;default:break;}};return _this;}_createClass(HomePage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this2=this;var activeCur,result,qwe,_iterator,_step,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:activeCur=localStorage.getItem(\"currencySymbol\");this.setState({activeS:activeCur});_context.prev=2;_context.next=5;return client.query({query:PRODUCT});case 5:result=_context.sent;qwe=result.data.category.products.map(function(_ref){var gallery=_ref.gallery,id=_ref.id,name=_ref.name,prices=_ref.prices,brand=_ref.brand,inStock=_ref.inStock;var obj={product:gallery[0],id:id,name:name,brand:brand,price:prices,inStock:inStock};return obj;});this.setState({productAll:qwe});_iterator=_createForOfIteratorHelper(qwe);try{for(_iterator.s();!(_step=_iterator.n()).done;){data=_step.value;data.price.map(function(_ref2){var amount=_ref2.amount,currency=_ref2.currency;if(currency.symbol.trim()===_this2.state.activeS.trim()){return _this2.setState(function(prevState){return prevState.priceHomePage.push(amount);});}return amount;});}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);console.log(_context.t0.message);Notiflix.Notify.failure(\"\".concat(_context.t0.message));case 16:case\"end\":return _context.stop();}}},_callee,this,[[2,12]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(prev,state){var _this3=this;if(state.activeS!==this.props.symbolCard){state.activeS=this.props.symbolCard;if(state.priceHomePage.length>0){state.priceHomePage=[];}var _iterator2=_createForOfIteratorHelper(state.productAll),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var data=_step2.value;data.price.map(function(_ref3){var amount=_ref3.amount,currency=_ref3.currency;if(currency.symbol.trim()===_this3.props.symbolCard.trim()){return _this3.setState(function(prevState){return prevState.priceHomePage.push(amount);});}return amount;});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return;}}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,productAll=_this$state.productAll,priceHomePage=_this$state.priceHomePage;var symbolCard=this.props.symbolCard;return/*#__PURE__*/_jsxs(\"main\",{className:\"container backdrop\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"category-name\",children:\"Category name\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"gallery_list\",children:productAll.length>0&&productAll.map(function(_ref4,inx){var product=_ref4.product,id=_ref4.id,name=_ref4.name,price=_ref4.price,brand=_ref4.brand,inStock=_ref4.inStock;return/*#__PURE__*/_jsxs(\"li\",{onMouseOver:_this4.id,onMouseLeave:_this4.id,id:id,className:inStock?\"gallery_item\":\"gallery_item--disabled\",children:[/*#__PURE__*/_jsx(\"img\",{width:\"354\",height:\"330\",src:product,alt:\"our products\"}),/*#__PURE__*/_jsxs(\"p\",{className:inStock?\"gallery_brand\":\"gallery_brand--disabled\",children:[brand,name]}),/*#__PURE__*/_jsxs(\"p\",{className:inStock?\"gallery_price\":\"gallery_price--disabled\",children:[symbolCard,productAll.length>0&&price.map(function(data){return priceHomePage.filter(function(val,ind,arr){return arr.indexOf(val)===ind;}).find(function(val,ind){if(inx===ind&&val===data.amount&&data.currency.symbol.trim()===symbolCard.trim()){// console.log(val);\nreturn val;}return null;});})]}),id===_this4.state.id&&inStock&&/*#__PURE__*/_jsx(\"button\",{className:\"btn_add-basket\",children:/*#__PURE__*/_jsx(\"img\",{src:Basket,alt:\"Add to basket\"})}),!inStock&&/*#__PURE__*/_jsx(\"p\",{className:\"gallery_out\",children:\"OUT OF STOCK\"})]},id);})})]});}}]);return HomePage;}(Component);export{HomePage as default};","map":{"version":3,"names":["Component","PRODUCT","Basket","client","Notiflix","HomePage","state","showBasker","productAll","id","priceHomePage","activeS","e","currentTarget","_reactName","setState","activeCur","localStorage","getItem","query","result","qwe","data","category","products","map","gallery","name","prices","brand","inStock","obj","product","price","amount","currency","symbol","trim","prevState","push","console","log","message","Notify","failure","prev","props","symbolCard","length","inx","filter","val","ind","arr","indexOf","find"],"sources":["/Users/marknelovka/Desktop/Goit/React/shop/src/components/homePage.js"],"sourcesContent":["import { Component } from \"react\";\n// import { v4 } from \"uuid\";\nimport { PRODUCT } from \"./Api\";\nimport Basket from \"../images/Basket_card.svg\";\nimport { client } from \"../index\";\nimport Notiflix from \"notiflix\";\n\nexport default class HomePage extends Component {\n  state = {\n    showBasker: false,\n    productAll: [],\n    id: \"\",\n    priceHomePage: [],\n    activeS: \"\",\n  };\n\n  async componentDidMount() {\n    const activeCur = localStorage.getItem(\"currencySymbol\");\n    this.setState({ activeS: activeCur });\n    try {\n      const result = await client.query({\n        query: PRODUCT,\n      });\n      const qwe = result.data.category.products.map(\n        ({ gallery, id, name, prices, brand, inStock }) => {\n          const obj = {\n            product: gallery[0],\n            id: id,\n            name,\n            brand,\n            price: prices,\n            inStock,\n          };\n          return obj;\n        }\n      );\n      this.setState({ productAll: qwe });\n\n      for (let data of qwe) {\n        data.price.map(({ amount, currency }) => {\n          if (currency.symbol.trim() === this.state.activeS.trim()) {\n            return this.setState((prevState) => {\n              return prevState.priceHomePage.push(amount);\n            });\n          }\n          return amount;\n        });\n      }\n    } catch (error) {\n      console.log(error.message);\n      Notiflix.Notify.failure(`${error.message}`);\n    }\n  }\n\n  componentDidUpdate(prev, state) {\n    if (state.activeS !== this.props.symbolCard) {\n      state.activeS = this.props.symbolCard;\n      if (state.priceHomePage.length > 0) {\n        state.priceHomePage = [];\n      }\n      for (let data of state.productAll) {\n        data.price.map(({ amount, currency }) => {\n          if (currency.symbol.trim() === this.props.symbolCard.trim()) {\n            return this.setState((prevState) => {\n              return prevState.priceHomePage.push(amount);\n            });\n          }\n          return amount;\n        });\n      }\n      return;\n    }\n  }\n\n  id = (e) => {\n    const { id } = e.currentTarget;\n    switch (e._reactName) {\n      case \"onMouseOver\":\n        this.setState({ id: id });\n        break;\n      case \"onMouseLeave\":\n        this.setState({ id: \"\" });\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  render() {\n    const { productAll, priceHomePage } = this.state;\n    const { symbolCard } = this.props;\n    return (\n      <main className=\"container backdrop\">\n        <p className=\"category-name\">Category name</p>\n        <ul className=\"gallery_list\">\n          {productAll.length > 0 &&\n            productAll.map(\n              ({ product, id, name, price, brand, inStock }, inx) => {\n                return (\n                  <li\n                    onMouseOver={this.id}\n                    onMouseLeave={this.id}\n                    id={id}\n                    className={\n                      inStock ? \"gallery_item\" : \"gallery_item--disabled\"\n                    }\n                    key={id}\n                  >\n                    <img\n                      width=\"354\"\n                      height=\"330\"\n                      src={product}\n                      alt=\"our products\"\n                    />\n                    <p\n                      className={\n                        inStock ? \"gallery_brand\" : \"gallery_brand--disabled\"\n                      }\n                    >\n                      {brand}\n                      {name}\n                    </p>\n                    <p\n                      className={\n                        inStock ? \"gallery_price\" : \"gallery_price--disabled\"\n                      }\n                    >\n                      {symbolCard}\n                      {productAll.length > 0 &&\n                        price.map((data) => {\n                          return priceHomePage\n                            .filter((val, ind, arr) => arr.indexOf(val) === ind)\n                            .find((val, ind) => {\n                              if (\n                                inx === ind &&\n                                val === data.amount &&\n                                data.currency.symbol.trim() ===\n                                  symbolCard.trim()\n                              ) {\n                                // console.log(val);\n                                return val;\n                              }\n                              return null;\n                            });\n                        })}\n                    </p>\n                    {id === this.state.id && inStock && (\n                      <button className=\"btn_add-basket\">\n                        <img src={Basket} alt=\"Add to basket\" />\n                      </button>\n                    )}\n                    {!inStock && <p className=\"gallery_out\">OUT OF STOCK</p>}\n                  </li>\n                );\n              }\n            )}\n        </ul>\n      </main>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}