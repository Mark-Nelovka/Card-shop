{"ast":null,"code":"import _regeneratorRuntime from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/marknelovka/Desktop/Goit/React/shop/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import{v4}from\"uuid\";import Api from\"./Api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var fetchProduct=new Api();var ItemPage=/*#__PURE__*/function(_Component){_inherits(ItemPage,_Component);var _super=_createSuper(ItemPage);function ItemPage(){var _this;_classCallCheck(this,ItemPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={item:null,price:0,currentImage:null,active:null,activeId:null,activeAtribute:null,description:\"\"};_this.choiseItem=function(e){var src=e.currentTarget.dataset.src;_this.setState({currentImage:src});};_this.selectActive=function(e){var id=e.target.id;var index=e.target.dataset.index;var name=e.target.dataset.name;_this.setState({active:index,activeId:id,activeAtribute:name});};return _this;}_createClass(ItemPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this2=this;var fetchItem,item,_iterator,_step,data,str,_iterator2,_step2,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchProduct.getProductId(this.props.itemId);case 2:fetchItem=_context.sent;item=null;_iterator=_createForOfIteratorHelper(fetchItem);try{for(_iterator.s();!(_step=_iterator.n()).done;){data=_step.value;str=data.description.replace(/<\\/?[^>]+(>|$)/g,\"\");item={current:data.gallery[0],description:str};}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.setState({item:fetchItem,currentImage:item.current,description:item.description});_iterator2=_createForOfIteratorHelper(fetchItem);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_data=_step2.value;_data.prices.map(function(_ref){var amount=_ref.amount,currency=_ref.currency;if(currency.symbol.trim()===_this2.props.currentSymbol.trim()){return _this2.setState({price:amount});}return amount;});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}case 9:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,item=_this$state.item,currentImage=_this$state.currentImage,active=_this$state.active,activeAtribute=_this$state.activeAtribute,activeId=_this$state.activeId,description=_this$state.description;var _this$props=this.props,currentSymbol=_this$props.currentSymbol,addBag=_this$props.addBag,modalBag=_this$props.modalBag;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:modalBag?\"backdrop\":\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"item_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container_photo\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"item_list\",children:item&&item.map(function(_ref2){var gallery=_ref2.gallery;return gallery.map(function(src){return/*#__PURE__*/_jsx(\"li\",{\"data-src\":src,onClick:_this3.choiseItem,children:/*#__PURE__*/_jsx(\"img\",{height:\"80\",src:src,alt:\"Item\"})},v4());});})}),currentImage&&/*#__PURE__*/_jsx(\"div\",{className:\"item_image\",children:/*#__PURE__*/_jsx(\"img\",{height:\"511\",src:currentImage,alt:\"Current\"})})]}),item&&item.map(function(_ref3){var name=_ref3.name,brand=_ref3.brand,id=_ref3.id,attributes=_ref3.attributes,prices=_ref3.prices;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item_container-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:brand}),/*#__PURE__*/_jsx(\"p\",{children:name})]}),attributes.map(function(atr){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"item_name-options\",children:[atr.id,\":\"]}),/*#__PURE__*/_jsx(\"div\",{children:atr.items.map(function(_ref4,i){var value=_ref4.value;if(atr.id===\"Color\"){return/*#__PURE__*/_jsx(\"button\",{className:Number(active)===i&&activeId===id&&activeAtribute===atr.id?\"item_options-color--active\":\"item_options-color\",onClick:_this3.selectActive,children:/*#__PURE__*/_jsx(\"div\",{\"data-index\":i,\"data-name\":atr.id,id:id,style:{backgroundColor:value,width:\"32px\",height:\"32px\"}})},v4());}return/*#__PURE__*/_jsx(\"button\",{className:Number(active)===i&&activeId===id&&activeAtribute===atr.id?\"item_change-options--active\":\"item_change-options\",onClick:_this3.selectActive,id:id,\"data-index\":i,\"data-name\":atr.id,children:value},v4());})},v4())]},v4());}),/*#__PURE__*/_jsxs(\"div\",{className:\"item_container-price\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Price: \"}),/*#__PURE__*/_jsxs(\"p\",{children:[currentSymbol.trim(),prices.map(function(_ref5){var currency=_ref5.currency,amount=_ref5.amount;if(currency.symbol.trim()===currentSymbol.trim()){return amount;}return\"\";})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addBag,id:id,className:\"item_btn-add\",children:\"ADD TO CART\"}),/*#__PURE__*/_jsx(\"p\",{children:description})]},v4());})]})]});}}]);return ItemPage;}(Component);export{ItemPage as default};","map":{"version":3,"names":["Component","v4","Api","fetchProduct","ItemPage","state","item","price","currentImage","active","activeId","activeAtribute","description","choiseItem","e","src","currentTarget","dataset","setState","selectActive","id","target","index","name","getProductId","props","itemId","fetchItem","data","str","replace","current","gallery","prices","map","amount","currency","symbol","trim","currentSymbol","addBag","modalBag","brand","attributes","atr","items","i","value","Number","backgroundColor","width","height"],"sources":["/Users/marknelovka/Desktop/Goit/React/shop/src/components/ItemPage.js"],"sourcesContent":["import { Component } from \"react\";\nimport { v4 } from \"uuid\";\nimport Api from \"./Api\";\nconst fetchProduct = new Api();\n\nexport default class ItemPage extends Component {\n  state = {\n    item: null,\n    price: 0,\n    currentImage: null,\n    active: null,\n    activeId: null,\n    activeAtribute: null,\n    description: \"\",\n  };\n\n  async componentDidMount() {\n    const fetchItem = await fetchProduct.getProductId(this.props.itemId);\n\n    let item = null;\n    for (let data of fetchItem) {\n      const str = data.description.replace(/<\\/?[^>]+(>|$)/g, \"\");\n      item = {\n        current: data.gallery[0],\n        description: str,\n      };\n    }\n\n    this.setState({\n      item: fetchItem,\n      currentImage: item.current,\n      description: item.description,\n    });\n\n    for (let data of fetchItem) {\n      data.prices.map(({ amount, currency }) => {\n        if (currency.symbol.trim() === this.props.currentSymbol.trim()) {\n          return this.setState({ price: amount });\n        }\n        return amount;\n      });\n    }\n  }\n\n  choiseItem = (e) => {\n    const { src } = e.currentTarget.dataset;\n    this.setState({ currentImage: src });\n  };\n\n  selectActive = (e) => {\n    const { id } = e.target;\n    const { index } = e.target.dataset;\n    const { name } = e.target.dataset;\n    this.setState({\n      active: index,\n      activeId: id,\n      activeAtribute: name,\n    });\n  };\n  render() {\n    const {\n      item,\n      currentImage,\n      active,\n      activeAtribute,\n      activeId,\n      description,\n    } = this.state;\n    const { currentSymbol, addBag, modalBag } = this.props;\n    return (\n      <div className=\"container\">\n        <div className={modalBag ? \"backdrop\" : \"\"}></div>\n        <div className=\"item_container\">\n          <div className=\"container_photo\">\n            <ul className=\"item_list\">\n              {item &&\n                item.map(({ gallery }) => {\n                  return gallery.map((src) => {\n                    return (\n                      <li key={v4()} data-src={src} onClick={this.choiseItem}>\n                        <img height=\"80\" src={src} alt=\"Item\" />\n                      </li>\n                    );\n                  });\n                })}\n            </ul>\n            {currentImage && (\n              <div className=\"item_image\">\n                <img height=\"511\" src={currentImage} alt=\"Current\" />\n              </div>\n            )}\n          </div>\n          {item &&\n            item.map(({ name, brand, id, attributes, prices }) => {\n              return (\n                <div key={v4()}>\n                  <div className=\"item_container-info\">\n                    <p>{brand}</p>\n                    <p>{name}</p>\n                  </div>\n                  {attributes.map((atr) => {\n                    return (\n                      <div key={v4()}>\n                        <p className=\"item_name-options\">{atr.id}:</p>\n                        <div key={v4()}>\n                          {atr.items.map(({ value }, i) => {\n                            if (atr.id === \"Color\") {\n                              return (\n                                <button\n                                  className={\n                                    Number(active) === i &&\n                                    activeId === id &&\n                                    activeAtribute === atr.id\n                                      ? \"item_options-color--active\"\n                                      : \"item_options-color\"\n                                  }\n                                  key={v4()}\n                                  onClick={this.selectActive}\n                                >\n                                  <div\n                                    data-index={i}\n                                    data-name={atr.id}\n                                    id={id}\n                                    style={{\n                                      backgroundColor: value,\n                                      width: \"32px\",\n                                      height: \"32px\",\n                                    }}\n                                  ></div>\n                                </button>\n                              );\n                            }\n                            return (\n                              <button\n                                className={\n                                  Number(active) === i &&\n                                  activeId === id &&\n                                  activeAtribute === atr.id\n                                    ? \"item_change-options--active\"\n                                    : \"item_change-options\"\n                                }\n                                key={v4()}\n                                onClick={this.selectActive}\n                                id={id}\n                                data-index={i}\n                                data-name={atr.id}\n                              >\n                                {value}\n                              </button>\n                            );\n                          })}\n                        </div>\n                      </div>\n                    );\n                  })}\n                  <div className=\"item_container-price\">\n                    <p>Price: </p>\n                    <p>\n                      {currentSymbol.trim()}\n                      {prices.map(({ currency, amount }) => {\n                        if (currency.symbol.trim() === currentSymbol.trim()) {\n                          return amount;\n                        }\n                        return \"\";\n                      })}\n                    </p>\n                  </div>\n                  <button onClick={addBag} id={id} className=\"item_btn-add\">\n                    ADD TO CART\n                  </button>\n                  <p>{description}</p>\n                </div>\n              );\n            })}\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}